<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Car-O-Liner å°å°çŸ¥è­˜ç‹</title>

  <style>
    :root{
      --w: min(920px, 94vw);
    }

    html, body { height: 100%; }

    body{
      margin:0;
      font-family: system-ui, -apple-system, "Noto Sans TC", Segoe UI, Roboto, Arial, "Helvetica Neue", Helvetica, "å¾®è»Ÿæ­£é»‘é«”", sans-serif;
      color:#e5e7eb;
      /* é è¨­ç¬¬ä¸€é¡ŒèƒŒæ™¯ï¼Œä¹‹å¾Œç”¨ JS ä¾é¡Œç›®è¦†è“‹ background-image */
      background: #0f172a url('assets/01.jpeg') center 62% / 75% no-repeat fixed;
    }

    header{
      width: min(45vw, var(--w));
      margin:60px 0 10px auto;
      padding:0 8px;
    }
    header > *{
      max-width:90%;
      margin-left:auto;
    }

    /* æ¨™é¡Œï¼šé»‘è‰² */
    h1{
      margin:0;
      font-size: clamp(24px, 5vw, 38px);
      letter-spacing:.5px;
      color:#000000;
    }

    /* å‰¯æ¨™é¡Œï¼šé»‘è‰² */
    p.sub{
      margin:6px 0 0;
      color:#000000;
    }

    main{
      width: min(45vw, var(--w));
      margin:10px 20vw 60px auto;
      padding:16px;
      display:flex;
      flex-direction:column;
      align-items:flex-end;
    }

    /* é¡Œç›®å¡ç‰‡å¯¬åº¦å›ºå®š 28vw */
    .card{
      background:#0b1220cc;
      border:1px solid #1f2937;
      border-radius:18px;
      padding:18px;
      margin:14px 0;
      box-shadow:0 10px 30px rgba(0,0,0,.25);
      width:28vw;
      box-sizing:border-box;
    }

    .q{
      font-weight:800;
      font-size:20px;
      margin:6px 0 12px;
    }

    /* é¡Œç›®å‰æ•˜è¿°ï¼šç´…è‰² #913533 */
    .section-title{
      font-size:18px;
      font-weight:800;
      color:#913533;
      margin-bottom:4px;
    }

    .choices{
      display:grid;
      grid-template-columns:1fr;
      gap:12px;
    }
    .choices button{
      text-align:left;
      border:1px solid #334155;
      background:#0f172a;
      color:#e5e7eb;
      padding:12px 14px;
      border-radius:12px;
      cursor:pointer;
      transition: transform .02s ease-in, border-color .15s ease, box-shadow .15s ease;
    }

    /* æ»‘é¼ ç§»ä¸Š/é»é¸ï¼šç´…è‰²æ¡† */
    .choices button:hover{
      transform: translateY(-1px);
      border-color:#ef4444;
    }
    .choices button.selected{
      border-color:#ef4444;
      box-shadow:0 0 0 3px rgba(239,68,68,.35) inset;
    }

    #explain{
      margin-top:8px;
      align-self:flex-end;
    }

    .explain-card{
      background:#111827cc;
      border:1px solid #1f2937;
      border-radius:12px;
      padding:12px 14px;
      font-size:14px;
      width:28vw;
      box-sizing:border-box;
    }

    .controls{
      margin-top:14px;
      width:90%;
      height:40px;
    }

    .btn{
      background:#2563eb;
      color:white;
      border:none;
      padding:12px 16px;
      border-radius:12px;
      cursor:pointer;
      font-weight:700;
    }

    /* ä¸‹ä¸€é¡Œ / äº¤å· å›ºå®šåœ¨å³å´ 30vwã€ä¸‹å´ 2vw */
    #next,
    #finish{
      position:fixed;
      right:30vw;
      bottom:2vw;
      z-index:20;
    }

    footer{
      width: min(45vw, var(--w));
      margin:0 0 30px auto;
      padding:0 8px;
      color:#cbd5e1;
      font-size:12px;
    }

    /* æˆç¸¾å½ˆè·³è¦–çª—ï¼ˆç½®ä¸­ï¼‰ */
    #resultOverlay{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.65);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:60;
    }
    #resultModal{
      background:#020617f0;
      border-radius:18px;
      padding:24px 28px;
      max-width:320px;
      width:80%;
      text-align:center;
      border:1px solid #e5e7eb33;
      box-shadow:0 20px 40px rgba(0,0,0,.6);
    }
    #resultModal h2{
      margin:0 0 10px;
      font-size:20px;
    }
    #resultModal p{
      margin:4px 0;
      font-size:16px;
    }

    @media (max-width: 640px){
      header{
        width: var(--w);
        margin:40px auto 10px;
      }
      header > *{
        max-width:100%;
        margin-left:0;
      }

      main, footer{
        width: var(--w);
        margin-left:auto;
        margin-right:auto;
      }

      main{
        align-items:stretch;
      }
      .card{
        width:100%;
      }
      .explain-card{
        width:100%;
      }

      #next,
      #finish{
        position:static;
        margin-top:8px;
      }
      .controls{
        height:auto;
      }
      #resultModal{
        width:92%;
      }
    }
  </style>
</head>
<body>
  <!-- å·¦ä¸Šè§’ GIF å·²ç§»é™¤ -->

  <header>
    <h1>Car-O-Liner å°å°çŸ¥è­˜ç‹</h1>
    <p class="sub">æ¸¬è©¦çœ‹çœ‹ä½ å° Car-O-Liner çš„äº†è§£ç¨‹åº¦!</p>
  </header>

  <main>
    <div id="quiz"></div>
    <div id="explain"></div>

    <div class="controls">
      <button id="next" class="btn">ä¸‹ä¸€é¡Œ</button>
      <button id="finish" class="btn" style="display:none">äº¤å·</button>
    </div>

    <div id="summary"></div>
  </main>

  <footer></footer>

  <!-- æˆç¸¾å½ˆè·³è¦–çª— -->
  <div id="resultOverlay">
    <div id="resultModal"></div>
  </div>

<script>
/********************
 * é¡Œåº«ï¼ˆ10 é¡Œ Car-O-Linerï¼‰
 ********************/
const QUESTIONS = [
  {
    // ç¬¬ 1 é¡Œï¼šå“ç‰Œèµ·æº
    q:'Car-O-Liner å‰µç«‹æ–¼å“ªä¸€å¹´ï¼Ÿ',
    options:[
      '1963 å¹´',
      '1973 å¹´',
      '1983 å¹´',
      '1993 å¹´'
    ],
    answer:1,
    explain:'ğŸ’¡ è§£æï¼šCar-O-Liner æ–¼ 1973 å¹´åœ¨ç‘å…¸å‰µç«‹ï¼Œä¸¦ä»¥è»Šèº«æ ¡æ­£å¹³å°èˆ‡æ¸¬é‡ç³»çµ±èåå…¨çƒã€‚'
  },
  {
    // ç¬¬ 2 é¡Œï¼šOEM èªè­‰å„ªå‹¢
    q:'Car-O-Liner çš„è»Šèº«ä¿®å¾©èˆ‡é‡æ¸¬è¨­å‚™ç²å¾—å“ªäº› OEM è»Šå» çš„æ­£å¼èªè­‰ï¼Ÿ',
    options:[
      'Porsche',
      'Mercedes-Benz',
      'BMW',
      'ä»¥ä¸Šçš†æ˜¯'
    ],
    answer:3,
    explain:'ğŸ’¡ è§£æï¼šCar-O-Liner çš„æ ¡æ­£å¹³å°ã€EVO å¤¾å…·èˆ‡ Point X é‡æ¸¬ç³»çµ±å‡ç²å¾— Porscheã€Mercedes-Benz èˆ‡ BMW ç­‰é«˜ç«¯è»Šå» çš„åŸå» èªè­‰ï¼Œç‚ºå…¨çƒç¶­ä¿®ç¶²çµ¡æŒ‡å®šä½¿ç”¨è¨­å‚™ã€‚'
  },
  {
    // ç¬¬ 3 é¡Œï¼šæŠ€è¡“é ˜å…ˆæ¡ˆä¾‹
    q:'POINT X II æ˜¯ Car-O-Liner çš„å“ªä¸€é¡è¨­å‚™ï¼Ÿ',
    options:[
      'å¼•æ“è¨ºæ–·å„€',
      'è¼ªèƒå¹³è¡¡æ©Ÿ',
      'è»Šèº«ï¼è»Šæ¶ç²¾æº–é‡æ¸¬å·¥å…·',
      'èˆ‰å‡æ©Ÿç³»çµ±'
    ],
    answer:2,
    explain:'ğŸ’¡ è§£æï¼šPOINT X II æ˜¯ Car-O-Liner çš„æ——è‰¦æ¸¬é‡ç³»çµ±ï¼Œåˆ©ç”¨ç¢³çº–ç¶­æ¸¬è‡‚èˆ‡è—ç‰™å‚³è¼¸ï¼Œå¿«é€Ÿä¸”é«˜ç²¾åº¦åœ°æ¸¬é‡è»Šæ¶çµæ§‹ã€‚'
  },
  {
    // ç¬¬ 4 é¡Œï¼šé«˜éšå¹³å°ç³»åˆ—
    q:'Car-O-Liner çš„ã€ŒBenchRackâ„¢ 5500ã€æ˜¯ä¸‹åˆ—å“ªç¨®è¨­å‚™ï¼Ÿ',
    options:[
      'è»Šè¼ªå®šä½æ©Ÿ',
      'è¼ªèƒæ‹†è£æ©Ÿ',
      'è»Šèº«æ ¡æ­£ï¼ç›´ç·šæ‹‰ä¼¸å¹³å°',
      'è»Šèº«å™´æ¼†çƒ˜ä¹¾è¨­å‚™'
    ],
    answer:2,
    explain:'ğŸ’¡ è§£æï¼šBenchRackâ„¢ 5500 æ˜¯ Car-O-Liner çš„æ ¸å¿ƒç”¢å“ï¼Œçµåˆæ¶²å£“ç›´ç·šæ‹‰ä¼¸èˆ‡å¤¾å…·æ¨¡çµ„ï¼Œæ”¯æ´ OEM èªè­‰ç¶­ä¿®æµç¨‹ã€‚'
  },
  {
    // ç¬¬ 5 é¡Œï¼šæŠ€èƒ½è³½åˆä½œ
    q:'Car-O-Liner èˆ‡ WorldSkills International çš„åˆä½œé—œä¿‚æ˜¯ä»€éº¼ï¼Ÿ',
    options:[
      'æä¾›æ¯”è³½ç”¨è¼ªèƒå…è²»é…çµ¦',
      'ç‚ºæ±½è»Šè»Šé«”èˆ‡è»Šèº«ç¶­ä¿®ç«¶è³½æä¾›è¨­å‚™æ”¯æ´ï¼Œä¸¦æˆç‚ºå…¨çƒç”¢æ¥­å¤¥ä¼´',
      'è´ŠåŠ©åƒè³½è€…æ—…éŠè§€å…‰',
      'æä¾›æ¯”è³½ç”¨é¤é»èˆ‡æœƒå ´è£æ½¢æœå‹™'
    ],
    answer:1,
    explain:'ğŸ’¡ è§£æï¼šCar-O-Liner è‡ª 2009 å¹´èµ·æ”¯æ´ WorldSkills è³½äº‹ï¼Œä¸¦æ–¼ 2018 å¹´æˆç‚ºå…¨çƒç”¢æ¥­å¤¥ä¼´ï¼Œè‡´åŠ›æ–¼åŸ¹è‚²å°ˆæ¥­ç¶­ä¿®äººæ‰ã€‚'
  },
  {
    // ç¬¬ 6 é¡Œï¼šå°ˆåˆ©ï¼å‰µæ–°æŠ€è¡“
    q:'Car-O-Liner çš„ã€ŒEVOâ„¢ Universal Fixture Kitã€ç³»çµ±ä¸»è¦ç”¨æ–¼ä½•ç¨®ç”¨é€”ï¼Ÿ',
    options:[
      'æ±½è»ŠéŸ³éŸ¿åŠå…§è£å®‰è£',
      'è»Šèº«å›ºå®šå¤¾å…·èˆ‡éŒ¨å›ºç³»çµ±ï¼Œæ”¯æ´è»Šé«”æ ¡æ­£ä½œæ¥­',
      'è¼ªèƒæ‹†è£æ©Ÿç²¾æº–æ§åˆ¶æ¨¡çµ„',
      'è»Šå…§é€šè¨ŠåŠç„¡ç·šè¨ºæ–·å¹³å°'
    ],
    answer:1,
    explain:'ğŸ’¡ è§£æï¼šEVOâ„¢ ç³»åˆ—ç‚º Car-O-Liner çš„å°ˆåˆ©æ¨¡çµ„åŒ–å¤¾å…·ç³»çµ±ï¼Œå¯é©é…å¤šè»Šå‹ä¸¦æå‡ä¿®å¾©ç²¾åº¦ã€‚'
  },
  {
    // ç¬¬ 7 é¡Œï¼šCar-O-Tronic æŠ€è¡“
    q:'Car-O-Liner çš„ Car-O-Tronic Vision2 ç³»çµ±ä¸»è¦åŠŸèƒ½æ˜¯ï¼Ÿ',
    options:[
      'è‡ªå‹•åµæ¸¬è»Šè¼ªå¹³è¡¡ç‹€æ…‹',
      'å¯¦æ™‚ç›£æ§è»Šèº«ä¿®å¾©éç¨‹ä¸¦èˆ‡è³‡æ–™åº«æ¯”å°',
      'è»Šè¼›é›»å­æ§åˆ¶æ¨¡çµ„ç¶­ä¿®',
      'è‡ªå‹•å™´æ¼†åšåº¦æ¸¬é‡'
    ],
    answer:1,
    explain:'ğŸ’¡ è§£æï¼šCar-O-Tronic Vision2 ç³»çµ±èƒ½åŒæ­¥æ¸¬é‡æ•¸æ“šèˆ‡ OEM è»Šé«”åŸºæº–è³‡æ–™åº«é€£å‹•ï¼Œç¢ºä¿ä¿®å¾©ç²¾åº¦ã€‚'
  },
  {
    // ç¬¬ 8 é¡Œï¼šå“ç‰Œå®šä½èˆ‡æŠ€è¡“ç›®æ¨™
    q:'Car-O-Liner çš„æŠ€è¡“ç™¼å±•é‡é»åŒ…æ‹¬å“ªä¸‰é …ï¼Ÿ',
    options:[
      'åƒ¹æ ¼æœ€ä½ã€å¤–è§€æœ€ç‚«ã€æ“ä½œæœ€ç°¡å–®',
      'ç²¾å¯†é‡æ¸¬ã€è»Šé«”æ ¡æ­£ã€æ•ˆç‡æå‡',
      'åƒ…ä¾›æ”¹è£è»Šã€èµ°æ½®æµè·¯ç·šã€ä¸»è¦é‡å°æ¶ˆè²»è€…å¸‚å ´',
      'å‚³çµ±éŒ˜æ‰“æŠ€è¡“ã€æ‰‹å·¥æ ¡ç›´ã€å°‘ç”¨æ•¸æ“šåˆ†æ'
    ],
    answer:1,
    explain:'ğŸ’¡ è§£æï¼šå“ç‰Œè‡´åŠ›æ–¼ä»¥é«˜ç²¾åº¦æ¸¬é‡èˆ‡æ ¡æ­£ç³»çµ±ï¼Œæå‡ä¿®å¾©æ•ˆç‡èˆ‡å®‰å…¨æ¨™æº–ã€‚'
  },
  {
    // ç¬¬ 9 é¡Œï¼šå…¨çƒèªè­‰å„ªå‹¢
    q:'Car-O-Liner çš„è¨­å‚™å·²ç²å¾—ä¸‹åˆ—å“ªé¡ OEM èªè­‰ï¼Ÿ',
    options:[
      'åƒ…é™äºæ´²åœ°å€ OEM',
      'å¤šå®¶å…¨çƒæ±½è»Šå“ç‰Œçš„ OEM èªè­‰ï¼Œå¦‚ BMWã€Volvoã€Mercedes-Benz',
      'åƒ…é™é›»å‹•è»Šå“ç‰Œ',
      'å°šæœªç²å¾—ä»»ä½• OEM èªè­‰'
    ],
    answer:1,
    explain:'ğŸ’¡ è§£æï¼šCar-O-Liner çš„æ ¡æ­£å¹³å°èˆ‡æ¸¬é‡ç³»çµ±ç²å¤šå®¶è»Šå» èªå¯ï¼Œç¢ºä¿ä¿®å¾©ä½œæ¥­ç¬¦åˆåŸå» æ¨™æº–ã€‚'
  },
  {
    // ç¬¬ 10 é¡Œï¼šå“ç‰Œå£è™Ÿèˆ‡é¡˜æ™¯
    q:'ä¸‹åˆ—å“ªä¸€å¥æœ€èƒ½ä»£è¡¨ Car-O-Liner çš„å“ç‰Œå£è™Ÿï¼Ÿ',
    options:[
      'å·¥å…·ç„¡æ‰€ä¸åœ¨',
      'æ”¹è£ç”±æˆ‘é ˜èˆª',
      'Precision for Collision',
      'é€Ÿä¿®å…ˆæ±º'
    ],
    answer:2,
    explain:'ğŸ’¡ è§£æï¼šæ­¤å£è™Ÿé«”ç¾ Car-O-Liner å°ˆæ³¨æ–¼è»Šèº«ç¢°æ’ä¿®å¾©ï¼Œä»¥ã€Œç²¾æº–ã€ä½œç‚ºå“ç‰Œçš„æ ¸å¿ƒæ‰¿è«¾èˆ‡é¡˜æ™¯ã€‚'
  }
];

/********************
 * æ¯é¡Œå°æ‡‰çš„èƒŒæ™¯åœ–
 * indexï¼š0â€“9 å°æ‡‰ç¬¬ 1â€“10 é¡Œ
 ********************/
const BG_MAP = {
  0: 'assets/01.jpeg',
  1: 'assets/02.jpeg',
  2: 'assets/03.jpeg',
  3: 'assets/04.jpeg',
  4: 'assets/05.jpeg',
  5: 'assets/06.jpeg',
  6: 'assets/07.jpeg',
  7: 'assets/08.jpeg',
  8: 'assets/09.jpeg',
  9: 'assets/10.jpeg'
};

let state = {
  idx: 0,
  score: 0,
  selected: {},
  startAt: Date.now(),
  finished: false,
  explainShown: {}
};

const POINTS_PER_Q = 1;

const $  = (s)=>document.querySelector(s);
const quizEl       = $('#quiz');
const explainEl    = $('#explain');
const nextBtn      = $('#next');
const finishBtn    = $('#finish');
const summaryEl    = $('#summary');
const overlayEl    = $('#resultOverlay');
const resultModal  = $('#resultModal');

function render(){
  const total = QUESTIONS.length;

  nextBtn.style.display  = state.idx < total-1 ? 'inline-block' : 'none';
  finishBtn.style.display= state.idx === total-1 ? 'inline-block' : 'none';

  const q = QUESTIONS[state.idx];
  quizEl.innerHTML = '';
  explainEl.innerHTML = '';

  const card = document.createElement('div');
  card.className = 'card';

  // é¡Œç›®å‰çš„ç´…è‰²å°æ¨™é¡Œ
  if (state.idx === 0){
    const t = document.createElement('div');
    t.className = 'section-title';
    t.textContent = '1ï¸âƒ£ å“ç‰Œèµ·æº';
    card.appendChild(t);
  }
  if (state.idx === 1){
    const t = document.createElement('div');
    t.className = 'section-title';
    t.textContent = '2ï¸âƒ£ OEM èªè­‰å„ªå‹¢';
    card.appendChild(t);
  }
  if (state.idx === 2){
    const t = document.createElement('div');
    t.className = 'section-title';
    t.textContent = '3ï¸âƒ£ æŠ€è¡“é ˜å…ˆæ¡ˆä¾‹';
    card.appendChild(t);
  }
  if (state.idx === 3){
    const t = document.createElement('div');
    t.className = 'section-title';
    t.textContent = '4ï¸âƒ£ é«˜éšå¹³å°ç³»åˆ—';
    card.appendChild(t);
  }
  if (state.idx === 4){
    const t = document.createElement('div');
    t.className = 'section-title';
    t.textContent = '5ï¸âƒ£ æŠ€èƒ½è³½åˆä½œ';
    card.appendChild(t);
  }
  if (state.idx === 5){
    const t = document.createElement('div');
    t.className = 'section-title';
    t.textContent = '6ï¸âƒ£ å°ˆåˆ©ï¼å‰µæ–°æŠ€è¡“';
    card.appendChild(t);
  }
  if (state.idx === 6){
    const t = document.createElement('div');
    t.className = 'section-title';
    t.textContent = '7ï¸âƒ£ Car-O-Tronic æŠ€è¡“';
    card.appendChild(t);
  }
  if (state.idx === 7){
    const t = document.createElement('div');
    t.className = 'section-title';
    t.textContent = '8ï¸âƒ£ å“ç‰Œå®šä½èˆ‡æŠ€è¡“ç›®æ¨™';
    card.appendChild(t);
  }
  if (state.idx === 8){
    const t = document.createElement('div');
    t.className = 'section-title';
    t.textContent = '9ï¸âƒ£ å…¨çƒèªè­‰å„ªå‹¢';
    card.appendChild(t);
  }
  if (state.idx === 9){
    const t = document.createElement('div');
    t.className = 'section-title';
    t.textContent = 'ğŸ”Ÿ å“ç‰Œå£è™Ÿèˆ‡é¡˜æ™¯';
    card.appendChild(t);
  }

  const qEl = document.createElement('div');
  qEl.className = 'q';
  qEl.textContent = q.q;
  card.appendChild(qEl);

  const choices = document.createElement('div');
  choices.className = 'choices';

  q.options.forEach((opt, i) => {
    const btn = document.createElement('button');
    btn.textContent = `${'ABCD'[i]}. ${opt}`;

    const sel = state.selected[state.idx];
    if (sel === i) btn.classList.add('selected');

    btn.addEventListener('click', () => {
      state.selected[state.idx] = i;
      render();
    });

    choices.appendChild(btn);
  });

  card.appendChild(choices);
  quizEl.appendChild(card);

  // æ ¹æ“šé¡Œç›®åˆ‡æ›èƒŒæ™¯åœ–ï¼ˆå¤§å°èˆ‡ä½ç½®ç”± CSS æ§åˆ¶ï¼Œä¸è®Šï¼‰
  const bgPath = BG_MAP[state.idx] || 'assets/01.jpeg';
  document.body.style.backgroundImage = `url('${bgPath}')`;
}

function showExplain(idx){
  const q = QUESTIONS[idx];
  const text = q.explain;
  if (!text) return;

  const sel = state.selected[idx];
  let correctnessHtml = '';
  if (typeof sel === 'number'){
    const isCorrect   = sel === q.answer;
    const selText     = `${'ABCD'[sel]}. ${q.options[sel]}`;
    const correctText = `${'ABCD'[q.answer]}. ${q.options[q.answer]}`;

    if (isCorrect){
      correctnessHtml = `
        <div style="margin-bottom:6px;">
          âœ… ä½ çš„ç­”æ¡ˆï¼š${selText}ï¼ˆæ­£ç¢ºï¼‰
        </div>
      `;
    } else {
      correctnessHtml = `
        <div style="margin-bottom:6px;">
          âŒ ä½ çš„ç­”æ¡ˆï¼š${selText}<br>
          æ­£ç¢ºç­”æ¡ˆï¼š${correctText}
        </div>
      `;
    }
  }

  explainEl.innerHTML = `
    <div class="explain-card">
      ${correctnessHtml}
      <div>${text}</div>
    </div>
  `;
}

function showResultModal(score, maxScore){
  const percent = Math.round((score / maxScore) * 100);

  resultModal.innerHTML = `
    <h2>ä½œç­”çµæœ</h2>
    <p>å¾—åˆ†ï¼š<strong>${score} / ${maxScore}</strong></p>
    <p>æ­£ç¢ºç‡ï¼š<strong>${percent}%</strong></p>
    <button id="restartBtn" class="btn" style="margin-top:16px;">å†æŒ‘æˆ°ä¸€æ¬¡ï¼</button>
  `;

  overlayEl.style.display = 'flex';

  const restartBtn = document.querySelector('#restartBtn');
  restartBtn.onclick = () => {
    overlayEl.style.display = 'none';
    state.idx = 0;
    state.score = 0;
    state.selected = {};
    state.startAt = Date.now();
    state.finished = false;
    state.explainShown = {};
    explainEl.innerHTML = '';
    summaryEl.innerHTML = '';
    render();
  };
}

function grade(){
  let score = 0;

  QUESTIONS.forEach((q, i) => {
    const sel = state.selected[i];
    if (sel === q.answer) {
      score += POINTS_PER_Q;
    }
  });

  state.score    = score;
  state.finished = true;

  const maxScore = QUESTIONS.length * POINTS_PER_Q;
  showResultModal(score, maxScore);
}

nextBtn.addEventListener('click', () => {
  const total = QUESTIONS.length;
  const idx   = state.idx;

  if (!state.explainShown[idx] && QUESTIONS[idx].explain){
    if (typeof state.selected[idx] !== 'number'){
      alert('è«‹å…ˆé¸æ“‡ä¸€å€‹ç­”æ¡ˆå–”ï¼');
      return;
    }
    state.explainShown[idx] = true;
    showExplain(idx);
    return;
  }

  if (idx < total - 1) {
    state.idx++;
    render();
  }
});

finishBtn.addEventListener('click', () => {
  const idx = state.idx;

  if (!state.explainShown[idx] && QUESTIONS[idx].explain){
    if (typeof state.selected[idx] !== 'number'){
      alert('è«‹å…ˆé¸æ“‡ä¸€å€‹ç­”æ¡ˆå–”ï¼');
      return;
    }
    state.explainShown[idx] = true;
    showExplain(idx);
    return;
  }

  grade();
});

// åˆæ¬¡ç•«é¢
render();
</script>
</body>
</html>
